domain: messages
description: "Messages sent or received by people across different platforms"

schemas:
  sql:
    insightmesh: "messages"
    slack: "slack_messages"
  neo4j: "(:Message)"
  elastic: "message_index"

contexts:
  - conversations
  - channels
  - threads

sources:
  - database: slack
    table: slack_messages
    filters:
      user_id: $person.id
  - database: insightmesh
    table: messages
    filters:
      user_id: $person.id
  - elastic: message_index
    query_fields: [content, subject, body]

tools:
  - slack
  - gmail
  - notion

permissions:
  default: read
  roles:
    - analyst
    - support
  scopes:
    user: "own_messages_only"
    admin: "all_messages"

relationships:
  - domain: person
    type: "belongs_to"
    foreign_key: "user_id"
  - domain: channels
    type: "belongs_to"
    foreign_key: "channel_id" 